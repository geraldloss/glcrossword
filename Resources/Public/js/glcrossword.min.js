function GlCrossword(o){function r(){var o=jQuery(":focus"),r=o.attr("id"),s="^content[\\d]+x[\\d]+_"+ro+"$",_=new RegExp(s),t=_.exec(r);return null===t?!1:!0}function s(){jQuery(document).keydown(function(o){GlCrossword.glcrosswordEventHandler(ro,o,"onKeydown",null)}),jQuery(document).keypress(function(o){GlCrossword.glcrosswordEventHandler(ro,o,"onKeypress",null)})}function _(){var o="";o="#glcrossword_"+ro,jQuery(o).contents().filter(".glcrossword_answer").each(function(o){var r=jQuery(this);r.click(function(o){GlCrossword.glcrosswordEventHandler(ro,o,"onMouseClickAnswer",r)})})}function t(){var o=null,r={},s="",_="";s="#glcrossword_"+ro,jQuery(s).contents().filter(".glcrossword_cell_layout").each(function(s){o=jQuery(this),r=C(GlCrossword.C_INT_BOX_ID_LENGTH,o.attr("id")),_o[r.x][r.y]&&(o.hasClass("glcrossword_question")?(o.toggleClass("glcrossword_question"),o.toggleClass("glcrossword_question_error")):o.hasClass("glcrossword_answer")?(o.toggleClass("glcrossword_answer"),o.toggleClass("glcrossword_answer_error")):o.hasClass("glcrossword_empty")&&(o.toggleClass("glcrossword_empty"),o.toggleClass("glcrossword_empty_error")),_="#"+o.attr("id"),o.popover({content:_o[r.x][r.y],placement:"auto top",trigger:"hover",animation:!0,container:_,html:!0}))}),jQuery(s).contents().filter(".glcrossword_error_oob").each(function(r){o=jQuery(this),_="#"+o.attr("id"),o.popover({content:to[r],placement:"auto top",trigger:"hover",animation:!0,container:_,html:!0})})}function e(){var o="",r="",s="";lo=Array.from(Array(Co+1).keys());for(var _=0;_<lo.length;_++)lo[_]=Array.from(Array(io+1).keys());o="#glcrossword_"+ro,jQuery(o).contents().filter(".glcrossword_question").each(function(o){var _={},t=jQuery(this);if(_=C(GlCrossword.C_INT_BOX_ID_LENGTH,jQuery(this).attr("id")),!_o[_.x][_.y]){for(var e=0;e<=GlCrossword.C_INT_DIR_MAX;e++)if(null!==so[_.x][_.y][e]){r=so[_.x][_.y][e];break}s="#"+jQuery(this).attr("id");var n={};n[GlCrossword.C_STR_POPOVER_KEY_DIR]=-1,n[GlCrossword.C_STR_POPOVER_KEY_SHOW]=!1,n[GlCrossword.C_STR_POPOVER_KEY_TITLE]=r,lo[_.x][_.y]=n,t.mousemove(function(o){GlCrossword.glcrosswordEventHandler(ro,o,"onMouseMoveQuestion",t)}),t.mouseleave(function(o){GlCrossword.glcrosswordEventHandler(ro,o,"onMouseLeaveQuestion",t)}),t.click(function(o){GlCrossword.glcrosswordEventHandler(ro,o,"onMouseClickQuestion",t)})}})}function n(){var o={},r={};o=M("#btnSolution"),o.button().click(function(r){GlCrossword.glcrosswordEventHandler(ro,r,"onButtonClickSolution",o)}),r=M("#btnHint"),r.button().click(function(o){GlCrossword.glcrosswordEventHandler(ro,o,"onButtonClickHint",r)})}function l(o,r){var s=Math.pow(o.x-r.pageX,2),_=Math.pow(o.y-r.pageY,2);return Math.sqrt(s+_)}function C(o,r){var s=0,_=0,t=0;return r=r.substr(o),t=r.indexOf("x"),s=parseInt(r.substr(0,t)),t+=1,_=parseInt(r.substr(t)),{x:s,y:_}}function d(o){var r=[],s=[],_=0,t=0;return _=o.width()/4,t=o.height()/4,s=o.offset(),r[GlCrossword.C_INT_DIR_TOP_LEFT]={},r[GlCrossword.C_INT_DIR_TOP_LEFT].x=Math.round(s.left+_),r[GlCrossword.C_INT_DIR_TOP_LEFT].y=s.top,r[GlCrossword.C_INT_DIR_TOP]={},r[GlCrossword.C_INT_DIR_TOP].x=Math.round(s.left+2*_),r[GlCrossword.C_INT_DIR_TOP].y=s.top,r[GlCrossword.C_INT_DIR_TOP_RIGHT]={},r[GlCrossword.C_INT_DIR_TOP_RIGHT].x=Math.round(s.left+3*_),r[GlCrossword.C_INT_DIR_TOP_RIGHT].y=s.top,r[GlCrossword.C_INT_DIR_RIGHT_TOP]={},r[GlCrossword.C_INT_DIR_RIGHT_TOP].x=s.left+o.width(),r[GlCrossword.C_INT_DIR_RIGHT_TOP].y=Math.round(s.top+t),r[GlCrossword.C_INT_DIR_RIGHT]={},r[GlCrossword.C_INT_DIR_RIGHT].x=s.left+o.width(),r[GlCrossword.C_INT_DIR_RIGHT].y=Math.round(s.top+2*t),r[GlCrossword.C_INT_DIR_RIGHT_DOWN]={},r[GlCrossword.C_INT_DIR_RIGHT_DOWN].x=s.left+o.width(),r[GlCrossword.C_INT_DIR_RIGHT_DOWN].y=Math.round(s.top+3*t),r[GlCrossword.C_INT_DIR_DOWN_LEFT]={},r[GlCrossword.C_INT_DIR_DOWN_LEFT].x=Math.round(s.left+_),r[GlCrossword.C_INT_DIR_DOWN_LEFT].y=s.top+o.height(),r[GlCrossword.C_INT_DIR_DOWN]={},r[GlCrossword.C_INT_DIR_DOWN].x=Math.round(s.left+2*_),r[GlCrossword.C_INT_DIR_DOWN].y=s.top+o.height(),r[GlCrossword.C_INT_DIR_DOWN_RIGTH]={},r[GlCrossword.C_INT_DIR_DOWN_RIGTH].x=Math.round(s.left+3*_),r[GlCrossword.C_INT_DIR_DOWN_RIGTH].y=s.top+o.height(),r[GlCrossword.C_INT_DIR_LEFT_TOP]={},r[GlCrossword.C_INT_DIR_LEFT_TOP].x=s.left,r[GlCrossword.C_INT_DIR_LEFT_TOP].y=Math.round(s.top+t),r[GlCrossword.C_INT_DIR_LEFT]={},r[GlCrossword.C_INT_DIR_LEFT].x=s.left,r[GlCrossword.C_INT_DIR_LEFT].y=Math.round(s.top+2*t),r[GlCrossword.C_INT_DIR_LEFT_DOWN]={},r[GlCrossword.C_INT_DIR_LEFT_DOWN].x=s.left,r[GlCrossword.C_INT_DIR_LEFT_DOWN].y=Math.round(s.top+3*t),r}function i(o,r,s){s="undefined"==typeof s?!1:s;var _="",t={};switch(t=C(GlCrossword.C_INT_BOX_ID_LENGTH,o.attr("id")),r){case GlCrossword.C_INT_DIR_TOP_LEFT:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_TOP_LEFT,a(_,"border-right-color",s),_="#arrowline"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_TOP_LEFT,T(_,"glcrossword_line_right_top_default","glcrossword_line_right_top_highlighted",s);break;case GlCrossword.C_INT_DIR_TOP:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_TOP,a(_,"border-bottom-color",s);break;case GlCrossword.C_INT_DIR_TOP_RIGHT:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_TOP_RIGHT,a(_,"border-left-color",s),_="#arrowline"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_TOP_RIGHT,T(_,"glcrossword_line_left_top_default","glcrossword_line_left_top_highlighted",s);break;case GlCrossword.C_INT_DIR_RIGHT_TOP:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_RIGHT_TOP,a(_,"border-bottom-color",s),_="#arrowline"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_RIGHT_TOP,T(_,"glcrossword_line_right_bottom_default","glcrossword_line_right_bottom_highlighted",s);break;case GlCrossword.C_INT_DIR_RIGHT:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_RIGHT,a(_,"border-left-color",s);break;case GlCrossword.C_INT_DIR_RIGHT_DOWN:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_RIGHT_DOWN,a(_,"border-top-color",s),_="#arrowline"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_RIGHT_DOWN,T(_,"glcrossword_line_right_top_default","glcrossword_line_right_top_highlighted",s);break;case GlCrossword.C_INT_DIR_DOWN_RIGTH:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_DOWN_RIGTH,a(_,"border-left-color",s),_="#arrowline"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_DOWN_RIGTH,T(_,"glcrossword_line_left_bottom_default","glcrossword_line_left_bottom_highlighted",s);break;case GlCrossword.C_INT_DIR_DOWN:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_DOWN,a(_,"border-top-color",s);break;case GlCrossword.C_INT_DIR_DOWN_LEFT:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_DOWN_LEFT,a(_,"border-right-color",s),_="#arrowline"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_DOWN_LEFT,T(_,"glcrossword_line_right_bottom_default","glcrossword_line_right_bottom_highlighted",s);break;case GlCrossword.C_INT_DIR_LEFT_DOWN:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_LEFT_DOWN,a(_,"border-top-color",s),_="#arrowline"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_LEFT_DOWN,T(_,"glcrossword_line_left_top_default","glcrossword_line_left_top_highlighted",s);break;case GlCrossword.C_INT_DIR_LEFT:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_LEFT,a(_,"border-right-color",s);break;case GlCrossword.C_INT_DIR_LEFT_TOP:_="#arrow"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_LEFT_TOP,a(_,"border-bottom-color",s),_="#arrowline"+t.x+"x"+t.y+"x"+GlCrossword.C_INT_DIR_LEFT_TOP,T(_,"glcrossword_line_left_bottom_default","glcrossword_line_left_bottom_highlighted",s)}}function T(o,r,s,_){_="undefined"==typeof _?!1:_;var t="",e={};e=M(o),t=e.attr("class"),(-1==t.search(/highlighted$/)&&_===!1||-1!=t.search(/highlighted$/)&&_===!0)&&(e.toggleClass(r),e.toggleClass(s))}function I(o,r){var s={},_=[],t=0,e=-1,n="",i=0,T=-1,I=[];s=C(GlCrossword.C_INT_BOX_ID_LENGTH,r.attr("id"));for(var a=0;a<=GlCrossword.C_INT_DIR_MAX;a++)null!==so[s.x][s.y][a]&&(_[a]=so[s.x][s.y][a],i+=1,T=a,n=_[a]);return i>1&&(I=d(r),jQuery.each(_,function(r,s){void 0!==s&&(t=l(I[r],o),(e>t||-1==e)&&(e=t,n=s,T=r))})),{intCountQuestions:i,intCurrentDirection:T,strQuestionText:n}}function a(o,r,s){s="undefined"==typeof s?!1:s;var _={};_=M(o),_.css(r)==GlCrossword.C_STR_COLOUR_DEFAULT_INTERNAL&&s===!1?_.css(r,GlCrossword.C_STR_COLOUR_HIGHLIGHTED):_.css(r)==GlCrossword.C_STR_COLOUR_HIGHLIGHTED_INTERNAL&&s===!0&&_.css(r,GlCrossword.C_STR_COLOUR_DEFAULT)}function w(o,r){var s={},_=0;switch(jQuery.extend(s,o),r){case GlCrossword.C_INT_DIR_TOP_LEFT:s.y-=1,_=GlCrossword.C_INT_EDIT_DIR_LEFT;break;case GlCrossword.C_INT_DIR_TOP:s.y-=1,_=GlCrossword.C_INT_EDIT_DIR_TOP;break;case GlCrossword.C_INT_DIR_TOP_RIGHT:s.y-=1,_=GlCrossword.C_INT_EDIT_DIR_RIGHT;break;case GlCrossword.C_INT_DIR_RIGHT_TOP:s.x+=1,_=GlCrossword.C_INT_EDIT_DIR_TOP;break;case GlCrossword.C_INT_DIR_RIGHT:s.x+=1,_=GlCrossword.C_INT_EDIT_DIR_RIGHT;break;case GlCrossword.C_INT_DIR_RIGHT_DOWN:s.x+=1,_=GlCrossword.C_INT_EDIT_DIR_BOTTOM;break;case GlCrossword.C_INT_DIR_DOWN_RIGTH:s.y+=1,_=GlCrossword.C_INT_EDIT_DIR_RIGHT;break;case GlCrossword.C_INT_DIR_DOWN:s.y+=1,_=GlCrossword.C_INT_EDIT_DIR_BOTTOM;break;case GlCrossword.C_INT_DIR_DOWN_LEFT:s.y+=1,_=GlCrossword.C_INT_EDIT_DIR_LEFT;break;case GlCrossword.C_INT_DIR_LEFT_DOWN:s.x-=1,_=GlCrossword.C_INT_EDIT_DIR_BOTTOM;break;case GlCrossword.C_INT_DIR_LEFT:s.x-=1,_=GlCrossword.C_INT_EDIT_DIR_LEFT;break;case GlCrossword.C_INT_DIR_LEFT_TOP:s.x-=1,_=GlCrossword.C_INT_EDIT_DIR_TOP}return{objEditCoordinate:s,intEditDirection:_}}function u(o,r,s,_,t,e,n){e="undefined"==typeof e?null:e,n="undefined"==typeof n?!1:n;var l=0,C={},d={};d=null===Eo?null:Eo.$objCurrentQuestion,n===!1&&null!==Eo&&u(Eo.objCoordinate,Eo.intEditDirection,Eo.intQuestionDirection,Eo.$objCurrentQuestion,Eo.strQuestionText,_,!0),D(o.x,o.y,!0),jQuery.each(eo[o.x][o.y][GlCrossword.C_STR_EDIT_DIRECTIONS][r],function(r,s){if(null!==s&&0!==s)for(jQuery.extend(C,o),l=0;s>l;)C=E(C,r),D(C.x,C.y),l++}),z(_,e,t,H(s),!n),R(o),i(_,s,n),n===!1&&(Eo={objCoordinate:o,intEditDirection:r,intQuestionDirection:s,$objCurrentQuestion:_,strQuestionText:t})}function D(o,r,s){s="undefined"==typeof s?!1:s;var _="",t={},e="";_=v(GlCrossword.C_STR_BOX_ID_PREFIX,o,r),t=M(_),s===!0?(e="glcrossword_answer_emph",G(t,"glcrossword_answer_emph")?c():W(o,r)):e="glcrossword_answer_edit",t.toggleClass(e),t.toggleClass("glcrossword_answer")}function c(){var o="#btnHint",r=M(o);r.focus()}function G(o,r){var s=o.attr("class"),_=s.split(/\s+/);return _.includes(r)}function E(o,r){var s={},_=0;switch(_=parseInt(r),s=o,_){case GlCrossword.C_INT_EDIT_SIDE_TOP:s.y-=1;break;case GlCrossword.C_INT_EDIT_SIDE_RIGHT:s.x+=1;break;case GlCrossword.C_INT_EDIT_SIDE_BOTTOM:s.y+=1;break;case GlCrossword.C_INT_EDIT_SIDE_LEFT:s.x-=1}return s}function R(o){var r,s="";s="#caret"+o.x+"x"+o.y,r=M(s),r.toggleClass("glcrossword_caret_inactive"),r.toggleClass("glcrossword_caret_active"),"glcrossword_caret_inactive"==r.attr("class")?r.fadeTo(500,0):N(r)}function N(o){o.fadeTo(500,0).fadeTo(700,1,function(){N(o)})}function O(o){var r=-1;switch(o.which){case GlCrossword.C_INT_KCODE_LEFT:r=GlCrossword.C_INT_EDIT_SIDE_LEFT;break;case GlCrossword.C_INT_KCODE_UP:r=GlCrossword.C_INT_EDIT_SIDE_TOP;break;case GlCrossword.C_INT_KCODE_RIGHT:r=GlCrossword.C_INT_EDIT_SIDE_RIGHT;break;case GlCrossword.C_INT_KCODE_DOWN:r=GlCrossword.C_INT_EDIT_SIDE_BOTTOM;break;default:return}o.preventDefault(),g(r)}function g(o){var r={},s=-1,_={},t={},e="";if(null!==Eo){if(f(Eo.objCoordinate,Eo.intEditDirection,o))return r=x(Eo.objCoordinate,o),void A(r);jQuery.extend(r,Eo.objCoordinate);do r=x(r,o);while(void 0===eo[r.x][r.y]);(r.x!=Eo.objCoordinate.x||r.y!=Eo.objCoordinate.y)&&(s=y(r),_=no[r.x][r.y][s],e=v(GlCrossword.C_STR_BOX_ID_PREFIX,_.x,_.y),t=M(e),u(r,s,parseInt(_[GlCrossword.C_STR_ECQ_KEY_NAME_DIR]),t,_[GlCrossword.C_STR_ECQ_KEY_NAME_TEXT]))}}function x(o,r){var s={};switch(jQuery.extend(s,o),r){case GlCrossword.C_INT_EDIT_DIR_LEFT:1==s.x?s.x=Co:s.x-=1;break;case GlCrossword.C_INT_EDIT_DIR_TOP:1==s.y?s.y=io:s.y-=1;break;case GlCrossword.C_INT_EDIT_DIR_RIGHT:s.x==Co?s.x=1:s.x+=1;break;case GlCrossword.C_INT_EDIT_DIR_BOTTOM:s.y==io?s.y=1:s.y+=1}return s}function f(o,r,s){var _=!1;return(r==s||r==h(s))&&eo[o.x][o.y][GlCrossword.C_STR_EDIT_DIRECTIONS][r][s]>0&&(_=!0),_}function h(o){switch(o){case GlCrossword.C_INT_EDIT_SIDE_LEFT:return GlCrossword.C_INT_EDIT_SIDE_RIGHT;case GlCrossword.C_INT_EDIT_SIDE_TOP:return GlCrossword.C_INT_EDIT_SIDE_BOTTOM;case GlCrossword.C_INT_EDIT_SIDE_RIGHT:return GlCrossword.C_INT_EDIT_SIDE_LEFT;case GlCrossword.C_INT_EDIT_SIDE_BOTTOM:return GlCrossword.C_INT_EDIT_SIDE_TOP}}function y(o,r){r="undefined"==typeof r?!0:r;var s=-1,_=0;for(s=null!==Eo?Eo.intEditDirection:GlCrossword.C_INT_EDIT_DIR_RIGHT,r===!1&&(s+=1,s>GlCrossword.C_INT_EDIT_DIR_MAX&&(s=0));void 0===no[o.x][o.y][s];)_>GlCrossword.C_INT_EDIT_DIR_MAX&&jQuery("<div />").html("Internal error with infinite loop. Contact developer.").dialog({modal:!0}),_+=1,s+=1,s>GlCrossword.C_INT_EDIT_DIR_MAX&&(s=0);return s}function b(o){var r={},s={},_={},t={},e="",n="",l="",d="",i=-1,T=0,I=0,a=-1;return o.preventDefault(),e=v(GlCrossword.C_STR_BOX_ID_CONTENT_PREFIX,Eo.objCoordinate.x,Eo.objCoordinate.y),r=M(e),o.which==GlCrossword.C_INT_KCODE_ENTER?(n=v(GlCrossword.C_STR_BOX_ID_PREFIX,Eo.objCoordinate.x,Eo.objCoordinate.y),n=n.substring(1,n.length),s=C(GlCrossword.C_INT_BOX_ID_LENGTH,n),a=y(s,!1),void(a!=Eo.intEditDirection&&(_=no[s.x][s.y][a],l_strCausingQuestionID=v(GlCrossword.C_STR_BOX_ID_PREFIX,_.x,_.y),t=M(l_strCausingQuestionID),u(s,a,parseInt(_[GlCrossword.C_STR_ECQ_KEY_NAME_DIR]),t,_[GlCrossword.C_STR_ECQ_KEY_NAME_TEXT])))):(T=eo[Eo.objCoordinate.x][Eo.objCoordinate.y][GlCrossword.C_STR_EDIT_FIELDLENGTH],d=o.which==GlCrossword.C_INT_KCODE_SZ?String.fromCharCode(o.which):String.fromCharCode(o.which).toUpperCase(),T>1?(l=r.val(),l=l.replace(/^\s+|\s+$/g,""),I=l.length,T==I?(r.val(d),I=1):(r.val(r.val()+d),I+=1)):(r.val(d),I=1),i=p(Eo.intEditDirection),void(eo[Eo.objCoordinate.x][Eo.objCoordinate.y][GlCrossword.C_STR_EDIT_DIRECTIONS][Eo.intEditDirection][i]>0&&T==I&&g(i)))}function j(o){var r={},s="",_=0,t="",e=-1,n=-1,l=0;(o.which==GlCrossword.C_INT_KCODE_BACKSPACE||o.which==GlCrossword.C_INT_KCODE_DEL)&&(o.preventDefault(),s=v(GlCrossword.C_STR_BOX_ID_CONTENT_PREFIX,Eo.objCoordinate.x,Eo.objCoordinate.y),r=M(s),l=eo[Eo.objCoordinate.x][Eo.objCoordinate.y][GlCrossword.C_STR_EDIT_FIELDLENGTH],l>1?(t=r.val(),t=t.replace(/^\s+|\s+$/g,""),_=t.length,_>0&&(_-=1,t=t.substr(0,_),r.val(t))):(r.val(""),_=0),e=p(Eo.intEditDirection),n=h(e),eo[Eo.objCoordinate.x][Eo.objCoordinate.y][GlCrossword.C_STR_EDIT_DIRECTIONS][Eo.intEditDirection][n]>0&&0===_&&o.which==GlCrossword.C_INT_KCODE_BACKSPACE&&g(n))}function v(o,r,s){return"#"+o+r+"x"+s}function p(o){switch(o){case GlCrossword.C_INT_EDIT_DIR_TOP:return GlCrossword.C_INT_EDIT_SIDE_TOP;case GlCrossword.C_INT_EDIT_DIR_RIGHT:return GlCrossword.C_INT_EDIT_SIDE_RIGHT;case GlCrossword.C_INT_EDIT_DIR_BOTTOM:return GlCrossword.C_INT_EDIT_SIDE_BOTTOM;case GlCrossword.C_INT_EDIT_DIR_LEFT:return GlCrossword.C_INT_EDIT_SIDE_LEFT}}function H(o){switch(o){case GlCrossword.C_INT_DIR_LEFT:case GlCrossword.C_INT_DIR_LEFT_DOWN:return GlCrossword.C_INT_EDIT_DIR_LEFT;case GlCrossword.C_INT_DIR_TOP_LEFT:case GlCrossword.C_INT_DIR_TOP:case GlCrossword.C_INT_DIR_TOP_RIGHT:case GlCrossword.C_INT_DIR_RIGHT_TOP:case GlCrossword.C_INT_DIR_LEFT_TOP:return GlCrossword.C_INT_EDIT_DIR_TOP;case GlCrossword.C_INT_DIR_RIGHT:case GlCrossword.C_INT_DIR_RIGHT_DOWN:return GlCrossword.C_INT_EDIT_DIR_RIGHT;case GlCrossword.C_INT_DIR_DOWN_LEFT:case GlCrossword.C_INT_DIR_DOWN:case GlCrossword.C_INT_DIR_DOWN_RIGTH:return GlCrossword.C_INT_EDIT_DIR_BOTTOM}}function P(o){o.which==GlCrossword.C_INT_KCODE_ESC&&(o.preventDefault(),u(Eo.objCoordinate,Eo.intEditDirection,Eo.intQuestionDirection,Eo.$objCurrentQuestion,Eo.strQuestionText,null,!0),Eo=null)}function S(o,r){var s={};return s=L(o,r),s.currentContent==s.rightContent?!0:!1}function Q(o,r){var s={},_={},t={},e="",n="",l="",C="";s=L(o,r),e=v(GlCrossword.C_STR_BOX_ID_CONTENT_PREFIX,o.x,o.y),_=M(e),n=v(GlCrossword.C_STR_BOX_ID_PREFIX,o.x,o.y),t=M(n),_.val(s.rightContent),t.toggleClass("glcrossword_answer"),t.toggleClass("glcrossword_answer_error"),l=Ro.wrongAnswerDialog+s.currentContent,C="#glcrossword_"+ro,t.tooltip({title:l,trigger:"hover",animation:!0,viewport:{selector:"body"},container:C})}function L(o,r){var s={},_="",t="",e={};return _=v(GlCrossword.C_STR_BOX_ID_CONTENT_PREFIX,o.x,o.y),s=M(_),t=s.val(),e={currentContent:t.replace(/^\s+|\s+$/g,""),rightContent:r.replace(/^\s+|\s+$/g,"")}}function F(){var o="";Do!==!1&&(Z(!1),o="#glcrossword_"+ro,jQuery(o).css("cursor","auto"),M("#btnHint").tooltip("hide"),null!==go&&(clearTimeout(go),go=null))}function m(o){var r="";r="#glcrossword_"+ro,o===!0?(jQuery(r).css("cursor","wait"),oo(!0),Go=!0):(oo(!1),Do===!0?(jQuery(r).css("cursor","help"),J(!0)):(jQuery(r).css("cursor","auto"),J(!1)),Go=!1),(Do===!1||o===!1)&&K(o)}function M(o){var r={};return r=jQuery(o+"_"+ro)}function A(o){D(Eo.objCoordinate.x,Eo.objCoordinate.y,!0),D(Eo.objCoordinate.x,Eo.objCoordinate.y,!1),R(Eo.objCoordinate),Eo.objCoordinate=o,D(Eo.objCoordinate.x,Eo.objCoordinate.y,!1),D(Eo.objCoordinate.x,Eo.objCoordinate.y,!0),R(Eo.objCoordinate),W(Eo.objCoordinate.x,Eo.objCoordinate.y)}function W(o,r){var s="",_={};s=v(GlCrossword.C_STR_BOX_ID_CONTENT_PREFIX,o,r),_=M(s),_.focus()}function K(o){var r="",s={},_={},t={};r="#glcrossword_"+ro,s=M("#ajaxHourGlassOuter"),o===!0?(s.toggleClass("glcrossword_ajax_hourglass_off",!1),s.toggleClass("glcrossword_ajax_hourglass_outer",!0),_=jQuery(r).find("#ajaxHourGlassText"),_.text(Ro.waitingDialog)):(s.toggleClass("glcrossword_ajax_hourglass_off",!0),s.toggleClass("glcrossword_ajax_hourglass_outer",!1),t=M("#ajaxHourGlassHint"),t.remove())}function X(o){var r={},s={},_="",t=0,e=0;_="#glcrossword_"+ro,r=jQuery(_),t=o.height()+Oo,e=o.width()+Oo,s=jQuery("<img/>",{id:"ajaxHourGlassHint_"+ro,"class":"glcrossword_ajax_hourglass_hint",src:No+"Resources/Public/images/Animated_Crossword.gif",style:"width: "+e+"px;height: "+t+"px;top: "+o.position().top+"px;left: "+o.position().left+"px;"}),r.append(s)}function B(o){var r={};return r=o,null===o?r={x:1,y:1}:o.x>=Co&&o.y>=io?r=null:o.x>=Co?(r.x=1,r.y+=1):r.x+=1,r}function k(o){var r={},s=!1,_={},t="",e={};for(_=B(o);s===!1&&null!==_;)t=v(GlCrossword.C_STR_BOX_ID_PREFIX,_.x,_.y),r=M(t),s=r.hasClass("glcrossword_answer"),s===!1&&(_=B(_));return null===_?null:(e.nextBox=r,e.nextCoordinates=_,e)}function U(o,r){var s={},_=[],t={};s=k(o),null!==s&&(_=s.nextCoordinates,t=s.nextBox,r[_.x][_.y]&&(t.toggleClass("glcrossword_answer"),S(_,r[_.x][_.y])?t.toggleClass("glcrossword_answer_right"):Q(_,r[_.x][_.y])),setTimeout(function(){U(_,r)},1))}function Y(o){o.tooltip("show"),go=setTimeout(function(){o.tooltip("hide")},1e4)}function $(o,r,s){var _=C(GlCrossword.C_INT_BOX_ID_LENGTH,o.attr("id"));(lo[_.x][_.y][GlCrossword.C_STR_POPOVER_KEY_SHOW]===!1||lo[_.x][_.y][GlCrossword.C_STR_POPOVER_KEY_TITLE]!=r)&&(lo[_.x][_.y][GlCrossword.C_STR_POPOVER_KEY_SHOW]===!0&&V(o),o.popover({content:r,trigger:"manual",animation:!0,container:"body",placement:q(s)}),o.popover("show"),lo[_.x][_.y][GlCrossword.C_STR_POPOVER_KEY_SHOW]=!0,lo[_.x][_.y][GlCrossword.C_STR_POPOVER_KEY_TITLE]=r,lo[_.x][_.y][GlCrossword.C_STR_POPOVER_KEY_DIR]=s)}function V(o){o.popover("dispose");var r=C(GlCrossword.C_INT_BOX_ID_LENGTH,o.attr("id"));lo[r.x][r.y][GlCrossword.C_STR_POPOVER_KEY_SHOW]=!1}function q(o){switch(o){case GlCrossword.C_INT_EDIT_DIR_TOP:return"bottom";case GlCrossword.C_INT_EDIT_DIR_RIGHT:return"top";case GlCrossword.C_INT_EDIT_DIR_BOTTOM:return"top";case GlCrossword.C_INT_EDIT_DIR_LEFT:return"top"}}function z(o,r,s,_,t){var e=C(GlCrossword.C_INT_BOX_ID_LENGTH,o.attr("ID"));(null===r||o.attr("ID")!=r.attr("ID")||lo[e.x][e.y][GlCrossword.C_STR_POPOVER_KEY_SHOW]!==!0)&&(t===!0?$(o,s,_):V(o))}function Z(o){Do=o,J(o)}function J(o){var r="#glcrossword_"+ro;jQuery(r).find(".glcrossword_inputbox_answer").each(function(r){var s=jQuery(this);s.removeClass(o?"glcrossword_cursor_default":"glcrossword_cursor_help"),s.addClass(o?"glcrossword_cursor_help":"glcrossword_cursor_default")})}function oo(o){var r="#glcrossword_"+ro;jQuery(r).find(".glcrossword_inputbox_answer").each(function(r){var s=jQuery(this);o?s.removeClass("glcrossword_cursor_wait"):(s.removeClass("glcrossword_cursor_wait"),s.addClass(Do?"glcrossword_cursor_help":"glcrossword_cursor_default"))})}GlCrossword.arrCrosswords[o]=this;var ro=o,so=[],_o=[],to=[],eo=[],no={},lo=[],Co=0,io=0,To=[],Io="",ao=-1,wo=!1,uo=!1,Do=!1,co={},Go=!1,Eo=null,Ro={},No="",Oo=0,go=null;this.requestAjaxGeneralCrosswordData=function(){var o=jQuery.param({intUniqueId:ro,strProcess:"getGeneralCrosswordData"});m(!0),jQuery.ajax({url:"/?PSR-15-eID=glcrossword&"+o,dataType:"json"}).done(function(o){GlCrossword.glcrosswordHandleAjaxResponse("processAjaxGeneralCrosswordData",o)})},this.processAjaxGeneralCrosswordData=function(o){var r={},l="";so=o.result.questions,Co=parseInt(o.result.size.x),io=parseInt(o.result.size.y),To=o.result.boxSize,wo=o.result.isError,_o=o.result.errors,to=o.result.errorsOOB,Ro=o.result.LLTexts,eo=o.result.editMatrix,no=o.result.editCausingQuestions,No=o.result.relPath,Oo=parseInt(o.result.borderWidth);var C="";C="#glcrossword_"+ro,r=M("#btnHint");var d="#btnHint_"+ro;r.tooltip({title:Ro.hintDescription,placement:"bottom",trigger:"manual",container:C,selector:d}),n(),e(),wo?(t(),l=['<div class="modal fade bs-example-modal-sm" role="dialog">','<div class="modal-dialog modal-sm" role="document">','<div class="modal-content">','<div class="modal-body">',Ro.errorDialog,"</div>",'<div class="modal-footer">','<button type="button" class="btn btn-default"','data-dismiss="modal">OK</button>',"</div>","</div>","</div>","</div>"].join("\n"),jQuery(l).modal()):(_(),s())},this.processAjaxSolutionData=function(o){this.cancelEditMode(),U(null,o.result.solution)},this.processAjaxHintData=function(o){var r={},s="";s=v(GlCrossword.C_STR_BOX_ID_CONTENT_PREFIX,co.x,co.y),r=M(s),r.val(o.result.hint),F()},this.cancelEditMode=function(){null!==Eo&&(u(Eo.objCoordinate,Eo.intEditDirection,Eo.intQuestionDirection,Eo.$objCurrentQuestion,Eo.strQuestionText,null,!0),Eo=null)},this.publicUnsetHintMode=function(){F()},this.onMouseMoveQuestion=function(o,r){l_objQuestionData={},l_objQuestionData=I(o,r),(null===Eo||r.attr("ID")!=Eo.$objCurrentQuestion.attr("ID")||1!=l_objQuestionData.intCountQuestions)&&($(r,l_objQuestionData.strQuestionText,H(l_objQuestionData.intCurrentDirection)),1==l_objQuestionData.intCountQuestions?ao!=l_objQuestionData.intCurrentDirection&&(ao=l_objQuestionData.intCurrentDirection,i(r,ao)):Io!=l_objQuestionData.strQuestionText&&(-1==ao||null!==Eo&&Eo.$objCurrentQuestion.attr("ID")==r.attr("ID")&&Eo.intQuestionDirection==ao||i(r,ao,!0),ao=l_objQuestionData.intCurrentDirection,Io=l_objQuestionData.strQuestionText,(null===Eo||Eo.$objCurrentQuestion.attr("ID")!=r.attr("ID")||Eo.intQuestionDirection!=ao)&&i(r,ao)))},this.onMouseLeaveQuestion=function(o,r){l_objQuestionData={},l_objQuestionData=I(o,r),null===Eo&&(i(r,ao,!0),V(r)),null!==Eo&&r.attr("ID")!=Eo.$objCurrentQuestion.attr("ID")&&(i(r,ao,!0),V(r)),null!==Eo&&l_objQuestionData.intCountQuestions>1&&Eo.$objCurrentQuestion.attr("ID")==r.attr("ID")&&Eo.intQuestionDirection!=ao&&(i(r,ao,!0),$(Eo.$objCurrentQuestion,Eo.strQuestionText,H(Eo.intQuestionDirection))),ao=-1,Io=""},this.onMouseClickQuestion=function(o,r){var s={},_={},t={};Go!==!0&&uo!==!0&&Do!==!0&&(GlCrossword.glcrosswordUnsetEditModeForOthers(ro),_=C(GlCrossword.C_INT_BOX_ID_LENGTH,r.attr("id")),s=I(o,r),t=w(_,s.intCurrentDirection),(null===Eo||Eo.$objCurrentQuestion!=r||Eo.intQuestionDirection!=s.intCurrentDirection)&&u(t.objEditCoordinate,t.intEditDirection,s.intCurrentDirection,r,s.strQuestionText))},this.onMouseClickAnswer=function(o,r){var s={},_={},t={},e={},n=-1,l="",d="",i=!1;if(Go!==!0&&uo!==!0){if(GlCrossword.glcrosswordUnsetEditModeForOthers(ro),s=C(GlCrossword.C_INT_BOX_ID_LENGTH,r.attr("id")),Do===!0)return co=s,d=jQuery.param({intUniqueId:ro,strProcess:"getHintData",params:s}),m(!0),X(r),void jQuery.ajax({url:"/?PSR-15-eID=glcrossword&"+d,dataType:"json"}).done(function(o){GlCrossword.glcrosswordHandleAjaxResponse("processAjaxHintData",o)});if(i=null!==Eo&&s.x==Eo.objCoordinate.x&&s.y==Eo.objCoordinate.y?!1:!0,n=y(s,i),i!==!1||n!=Eo.intEditDirection){if(t=no[s.x][s.y][n],null!==Eo&&(_=C(GlCrossword.C_INT_BOX_ID_LENGTH,Eo.$objCurrentQuestion.attr("id")),_.x==t.x&&_.y==t.y&&Eo.intQuestionDirection==t[GlCrossword.C_STR_ECQ_KEY_NAME_DIR]))return void A(s);l=v(GlCrossword.C_STR_BOX_ID_PREFIX,t.x,t.y),e=M(l),u(s,n,parseInt(t[GlCrossword.C_STR_ECQ_KEY_NAME_DIR]),e,t[GlCrossword.C_STR_ECQ_KEY_NAME_TEXT])}}},this.onKeydown=function(o,s){if(Go!==!0){if(Do===!0&&o.which==GlCrossword.C_INT_KCODE_ESC)return o.preventDefault(),void F();if(null===Eo)return void(r()===!0&&o.preventDefault());if(uo!==!0){if(o.which==GlCrossword.C_INT_KCODE_TAB)return void o.preventDefault();O(o),j(o),P(o)}}},this.onKeypress=function(o,r){Go!==!0&&null!==Eo&&uo!==!0&&b(o)},this.onButtonClickSolution=function(o,r){var s="";uo!==!0&&Go!==!0&&(o.preventDefault(),GlCrossword.glcrosswordUnsetEditModeForOthers(ro),uo=!0,F(),s=jQuery.param({intUniqueId:ro,strProcess:"getSolutionData"}),m(!0),jQuery.ajax({url:"/?PSR-15-eID=glcrossword&"+s,dataType:"json"}).done(function(o){GlCrossword.glcrosswordHandleAjaxResponse("processAjaxSolutionData",o)}))},this.onButtonClickHint=function(o,r){var s="";uo!==!0&&Go!==!0&&Do!==!0&&(o.preventDefault(),GlCrossword.glcrosswordUnsetEditModeForOthers(ro),s="#glcrossword_"+ro,jQuery(s).css("cursor","help"),Y(r),Z(!0))},this.publicSetAjaxWaitParams=function(o){m(o)}}GlCrossword.C_INT_DIR_TOP_LEFT=0,GlCrossword.C_INT_DIR_TOP=1,GlCrossword.C_INT_DIR_TOP_RIGHT=2,GlCrossword.C_INT_DIR_RIGHT_TOP=3,GlCrossword.C_INT_DIR_RIGHT=4,GlCrossword.C_INT_DIR_RIGHT_DOWN=5,GlCrossword.C_INT_DIR_DOWN_RIGTH=6,GlCrossword.C_INT_DIR_DOWN=7,GlCrossword.C_INT_DIR_DOWN_LEFT=8,GlCrossword.C_INT_DIR_LEFT_DOWN=9,GlCrossword.C_INT_DIR_LEFT=10,GlCrossword.C_INT_DIR_LEFT_TOP=11,GlCrossword.C_INT_EDIT_DIR_TOP=0,GlCrossword.C_INT_EDIT_DIR_RIGHT=1,GlCrossword.C_INT_EDIT_DIR_BOTTOM=2,GlCrossword.C_INT_EDIT_DIR_LEFT=3,GlCrossword.C_INT_EDIT_DIR_MAX=3,GlCrossword.C_INT_EDIT_SIDE_TOP=0,GlCrossword.C_INT_EDIT_SIDE_RIGHT=1,GlCrossword.C_INT_EDIT_SIDE_BOTTOM=2,GlCrossword.C_INT_EDIT_SIDE_LEFT=3,GlCrossword.C_INT_EDIT_SIDE_MAX=3,GlCrossword.C_INT_DIR_MAX=11,GlCrossword.C_STR_COLOUR_DEFAULT_INTERNAL="rgb(0, 0, 0)",GlCrossword.C_STR_COLOUR_DEFAULT="#000",GlCrossword.C_STR_COLOUR_HIGHLIGHTED="#DA1B20",GlCrossword.C_STR_COLOUR_HIGHLIGHTED_INTERNAL="rgb(218, 27, 32)",GlCrossword.C_STR_EDIT_FIELDLENGTH="fieldlength",GlCrossword.C_STR_EDIT_DIRECTIONS="directions",GlCrossword.C_INT_KCODE_LEFT=37,GlCrossword.C_INT_KCODE_UP=38,GlCrossword.C_INT_KCODE_RIGHT=39,GlCrossword.C_INT_KCODE_DOWN=40,GlCrossword.C_INT_KCODE_DEL=46,GlCrossword.C_INT_KCODE_BACKSPACE=8,GlCrossword.C_INT_KCODE_ESC=27,GlCrossword.C_INT_KCODE_TAB=9,GlCrossword.C_INT_KCODE_A_LOWER=65,GlCrossword.C_INT_KCODE_A_UPPER=97,GlCrossword.C_INT_KCODE_Z_LOWER=90,GlCrossword.C_INT_KCODE_A_UPPER=122,GlCrossword.C_INT_KCODE_SZ=223,GlCrossword.C_INT_KCODE_ENTER=13,GlCrossword.C_STR_ECQ_KEY_NAME_DIR="dir",GlCrossword.C_STR_ECQ_KEY_NAME_TEXT="text",GlCrossword.C_STR_POPOVER_KEY_DIR="dir",GlCrossword.C_STR_POPOVER_KEY_SHOW="show",GlCrossword.C_STR_POPOVER_KEY_TITLE="title",GlCrossword.C_STR_BOX_ID_PREFIX="box",GlCrossword.C_INT_BOX_ID_LENGTH=3,GlCrossword.C_STR_BOX_ID_CONTENT_PREFIX="content",GlCrossword.arrCrosswords=[],GlCrossword.glcrosswordInit=function(o){jQuery.each(o,function(o,r){var s=new GlCrossword(r);s.requestAjaxGeneralCrosswordData()})},GlCrossword.glcrosswordHandleAjaxResponse=function(o,r){var s=GlCrossword.arrCrosswords[r.intUniqueId];s.publicSetAjaxWaitParams(!1),s[o](r)},GlCrossword.glcrosswordEventHandler=function(o,r,s,_){var t=GlCrossword.arrCrosswords[o];t[s](r,_)},GlCrossword.glcrosswordUnsetEditModeForOthers=function(o){jQuery.each(GlCrossword.arrCrosswords,function(r,s){r!=o&&void 0!==s&&(s.cancelEditMode(),s.publicUnsetHintMode())})},GlCrossword.glcrosswordInit(arrGlcrosswordIds);
//# sourceMappingURL=glcrossword.min.js.map
